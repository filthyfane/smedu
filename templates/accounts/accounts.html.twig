{% extends 'base.nav.html.twig' %}

{% block title %}Conturi Curente{% endblock %}

{% block body %}

<div class="enrollment-wrapper">
  <h2 class="coinyFont" style="visibility:visible;">Conturi {{ current_year.getYearlabel|lower }}</h2>
  <br>
  {% if current_units is not empty %}
    {% for schoolunit in current_units %}
      <h3 class="kuraleFont">Conturi {{ schoolunit.unitname|lower }} </h3>
      {% if schoolunit.getStudents is not empty %}
        <table id="accounts-{{ schoolunit.id }}" class="table table-striped table-hover enrollmentsTable">

          <thead id="enroll_table_head">
            <tr>
              <th>Nume elev</th>
              <th>Facturi Neachitate</th>
              <th>Status</th>
              <th>Opționale</th>
              <th>Operațiuni</th>
              <th>Alertează</th>
            </tr>
          </thead>

          <tbody id="enrollments_table">
            {% set unitStudents = schoolunit.getStudents %}
            {% for student in sorted_students %}
              {% if student in unitStudents %}
                <tr id="enrollments_row">
                  <td>{{ student.getUser.getFullName(1) }}</td>
                  <td><code>for all year</code></td>
                  <td><code>expiră la / alertă / achitat</code></td>
                  <td>{{ student.getClassOptionals|length }}</td>
                  <td><center>
                    <a href="{{ path('accounts_stud_month', {'monthYear':(date('-1 month')|localizeddate('none','none','ro', null, 'yyyy-MM')), 'studId':student.id}) }}">
                      <button type="button" class="btn-sm btn-primary">{{ (date('-1 month')|localizeddate('none','none','ro', null, 'MMMM'))|capitalize }}</button>
                    </a>
                    <a href="{{ path('accounts_stud_month', {'monthYear':(date('now')|localizeddate('none','none','ro', null, 'yyyy-MM')), 'studId':student.id}) }}">
                      <button type="button" class="btn-sm btn-warning">{{ (date()|localizeddate('none','none','ro', null, 'MMMM'))|capitalize }}</button>
                    </a>
                    <a href="{{ path('accounts_stud', {'studId':student.id }) }}"><button type="button" class="btn-sm btn-success">TOATE</button></a>
                  </center></td>
                  <td>
                    <i class="far fa-envelope"></i>
                  </td>
                </tr>
              {% endif %}
            {% endfor %}
          </tbody>

        </table>
        <br>
      {% else %}
        <p>Nu există nicio înscriere în această unitate</p>
        <hr><br>
      {% endif %}
    {% endfor %}
  {% else %}
    <p>Nu există nicio unitate școlară definită în acest an școlar</p>
  {% endif %}


</div>

{% endblock %}

{% block javascripts %}
  <script>
  ScrollReveal({ reset: true }).reveal('.reveal', { duration:600, delay:0 });
    ScrollReveal({ reset: true }).reveal('.enrollmentsTable', { duration:2000, delay:0 });
    ScrollReveal({ reset: true }).reveal('#enroll_table_head', { duration:800, delay:0 });
    ScrollReveal({ reset: true }).reveal('#enrollments_row', { duration:1000, delay:0 });
  </script>
{% endblock %}
