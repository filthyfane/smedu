{% extends 'base.nav.html.twig' %}

{% block title %}Administrare Utilizatori{% endblock %}

{% block body %}
  <h2>Administrare Utilizatori</h2>
  <br>
  {% if users %}
    <table id="users" class="table table-striped table-hover">

      <thead>
        <tr>
          <th>Username</th>
          <th>E-mail</th>
          <th>Type</th>
          <th></th>
        </tr>
      </thead>

      <tbody>
        {% for user in users %}
          {# DO NOT display root user if imported from fixtures (useful for prod)#}
          {% if user.getUsername != "root" %}
          <tr>
            <td><a href="{{ path('user_show', {'id':user.id}) }}"><i class="fas fa-eye"></i>&nbsp{{ user.getFullName(1) }}</a></td>
            <td>{{ user.email }}</td>
            <td>{{ user.getNormalized }}</td>
            <td>
              <a href="{{ path('user_edit', {'id':user.id}) }}"><button type="button" class="btn btn-primary">Editează</button></a>

              {% if app.user.username != user.username %}
                <a href="#"><button type="button" class="btn btn-danger delete-user" data-id="{{ user.id }}">Șterge</button></a>
              {% endif %}
            </td>
          </tr>
          {% endif %}
        {% endfor %}

      </tbody>

    </table>
  {% else %}
    <p>No users found in DB</p>
  {% endif %}

{% endblock %}

{% block javascripts %}
  <script src="/js/user_delete.js"></script>
  <!-- <script src="{{ asset('js/user_delete.js') }}"></script> -->
{% endblock %}
